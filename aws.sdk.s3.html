<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>aws.sdk.s3 documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Clj-aws-s3 0.3.4 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li class="current"><a href="aws.sdk.s3.html"><span>aws.sdk.s3</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="aws.sdk.s3.html#var-bucket-exists%3F"><span>bucket-exists?</span></a></li><li><a href="aws.sdk.s3.html#var-copy-object"><span>copy-object</span></a></li><li><a href="aws.sdk.s3.html#var-create-acl"><span>create-acl</span></a></li><li><a href="aws.sdk.s3.html#var-create-bucket"><span>create-bucket</span></a></li><li><a href="aws.sdk.s3.html#var-delete-bucket"><span>delete-bucket</span></a></li><li><a href="aws.sdk.s3.html#var-delete-object"><span>delete-object</span></a></li><li><a href="aws.sdk.s3.html#var-generate-presigned-url"><span>generate-presigned-url</span></a></li><li><a href="aws.sdk.s3.html#var-get-bucket-acl"><span>get-bucket-acl</span></a></li><li><a href="aws.sdk.s3.html#var-get-object"><span>get-object</span></a></li><li><a href="aws.sdk.s3.html#var-get-object-acl"><span>get-object-acl</span></a></li><li><a href="aws.sdk.s3.html#var-get-object-metadata"><span>get-object-metadata</span></a></li><li><a href="aws.sdk.s3.html#var-grant"><span>grant</span></a></li><li><a href="aws.sdk.s3.html#var-list-buckets"><span>list-buckets</span></a></li><li><a href="aws.sdk.s3.html#var-list-objects"><span>list-objects</span></a></li><li><a href="aws.sdk.s3.html#var-object-exists%3F"><span>object-exists?</span></a></li><li><a href="aws.sdk.s3.html#var-put-object"><span>put-object</span></a></li><li><a href="aws.sdk.s3.html#var-revoke"><span>revoke</span></a></li><li><a href="aws.sdk.s3.html#var-update-bucket-acl"><span>update-bucket-acl</span></a></li><li><a href="aws.sdk.s3.html#var-update-object-acl"><span>update-object-acl</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>aws.sdk.s3 documentation</h2><pre class="doc">Functions to access the Amazon S3 storage service.

Each function takes a map of credentials as its first argument. The
credentials map should contain an :access-key key and a :secret-key key.</pre><div class="public" id="var-bucket-exists%3F"><h3>bucket-exists?</h3><div class="usage"><code>(bucket-exists? cred name)</code></div><pre class="doc">Returns true if the supplied bucket name already exists in S3.
</pre></div><div class="public" id="var-copy-object"><h3>copy-object</h3><div class="usage"><code>(copy-object cred bucket src-key dest-key)</code><code>(copy-object cred src-bucket src-key dest-bucket dest-key)</code></div><pre class="doc">Copy an existing S3 object to another key.
</pre></div><div class="public" id="var-create-acl"><h3>create-acl</h3><div class="usage"><code>(create-acl permissions)</code></div><pre class="doc">Creates a fresh access control list (ACL) given a set of grants,
using the grant function. See update-bucket-acl for examples.</pre></div><div class="public" id="var-create-bucket"><h3>create-bucket</h3><div class="usage"><code>(create-bucket cred name)</code></div><pre class="doc">Create a new S3 bucket with the supplied name.
</pre></div><div class="public" id="var-delete-bucket"><h3>delete-bucket</h3><div class="usage"><code>(delete-bucket cred name)</code></div><pre class="doc">Delete the S3 bucket with the supplied name.
</pre></div><div class="public" id="var-delete-object"><h3>delete-object</h3><div class="usage"><code>(delete-object cred bucket key)</code></div><pre class="doc">Delete an object from an S3 bucket.
</pre></div><div class="public" id="var-generate-presigned-url"><h3>generate-presigned-url</h3><div class="usage"><code>(generate-presigned-url cred bucket key &amp; [options])</code></div><pre class="doc">Return a presigned URL for an S3 object. Accepts the following options:
:expires     - the date at which the URL will expire (defaults to 1 day from now)
:http-method - the HTTP method for the URL (defaults to :get)</pre></div><div class="public" id="var-get-bucket-acl"><h3>get-bucket-acl</h3><div class="usage"><code>(get-bucket-acl cred bucket)</code></div><pre class="doc">Get the access control list (ACL) for the supplied bucket. The ACL is a map
containing two keys:
  :owner  - the owner of the ACL
  :grants - a set of access permissions granted

The grants themselves are maps with keys:
  :grantee    - the individual or group being granted access
  :permission - the type of permission (:read, :write, :read-acp, :write-acp or
                :full-control).</pre></div><div class="public" id="var-get-object"><h3>get-object</h3><div class="usage"><code>(get-object cred bucket key)</code></div><pre class="doc">Get an object from an S3 bucket. The object is returned as a map with the
following keys:
  :content  - an InputStream to the content
  :metadata - a map of the object's metadata
  :bucket   - the name of the bucket
  :key      - the object's key</pre></div><div class="public" id="var-get-object-acl"><h3>get-object-acl</h3><div class="usage"><code>(get-object-acl cred bucket key)</code></div><pre class="doc">Get the access control list (ACL) for the supplied object. See get-bucket-acl
for a detailed description of the return value.</pre></div><div class="public" id="var-get-object-metadata"><h3>get-object-metadata</h3><div class="usage"><code>(get-object-metadata cred bucket key)</code></div><pre class="doc">Get an object's metadata from a bucket. The metadata is a map with the
following keys:
  :cache-control          - the CacheControl HTTP header
  :content-disposition    - the ContentDisposition HTTP header
  :content-encoding       - the character encoding of the content
  :content-length         - the length of the content in bytes
  :content-md5            - the MD5 hash of the content
  :content-type           - the mime-type of the content
  :etag                   - the HTTP ETag header
  :last-modified          - the last modified date
  :server-side-encryption - the server-side encryption algorithm</pre></div><div class="public" id="var-grant"><h3>grant</h3><div class="usage"><code>(grant grantee permission)</code></div><pre class="doc">Returns a function that adds a new grant map to a set of grants.
See update-bucket-acl.</pre></div><div class="public" id="var-list-buckets"><h3>list-buckets</h3><div class="usage"><code>(list-buckets cred)</code></div><pre class="doc">List all the S3 buckets for the supplied credentials. The buckets will be
returned as a seq of maps with the following keys:
  :name          - the bucket name
  :creation-date - the date when the bucket was created
  :owner         - the owner of the bucket</pre></div><div class="public" id="var-list-objects"><h3>list-objects</h3><div class="usage"><code>(list-objects cred bucket &amp; [options])</code></div><pre class="doc">List the objects in an S3 bucket. A optional map of options may be supplied.
Available options are:
  :delimiter - read only keys up to the next delimiter (such as a '/')
  :marker    - read objects after this key
  :max-keys  - read only this many objects
  :prefix    - read only objects with this prefix

The object listing will be returned as a map containing the following keys:
  :bucket          - the name of the bucket
  :prefix          - the supplied prefix (or nil if none supplied)
  :objects         - a list of objects
  :common-prefixes - the common prefixes of keys omitted by the delimiter
  :max-keys        - the maximum number of objects to be returned
  :truncated?      - true if the list of objects was truncated
  :marker          - the marker of the listing
  :next-marker     - the next marker of the listing</pre></div><div class="public" id="var-object-exists%3F"><h3>object-exists?</h3><div class="usage"><code>(object-exists? cred bucket key)</code></div><pre class="doc">Returns true if an object exists in the supplied bucket and key.
</pre></div><div class="public" id="var-put-object"><h3>put-object</h3><div class="usage"><code>(put-object cred bucket key value &amp; [metadata &amp; permissions])</code></div><pre class="doc">Put a value into an S3 bucket at the specified key. The value can be
a String, InputStream or File (or anything that implements the ToPutRequest
protocol).

An optional map of metadata may also be supplied that can include any of the
following keys:
  :cache-control          - the cache-control header (see RFC 2616)
  :content-disposition    - how the content should be downloaded by browsers
  :content-encoding       - the encoding of the content (e.g. gzip)
  :content-length         - the length of the content in bytes
  :content-md5            - the MD5 sum of the content
  :content-type           - the mime type of the content
  :server-side-encryption - set to AES256 if SSE is required

An optional list of grant functions can be provided after metadata.
These functions will be applied to a clear ACL and the result will be
the ACL for the newly created object.</pre></div><div class="public" id="var-revoke"><h3>revoke</h3><div class="usage"><code>(revoke grantee permission)</code></div><pre class="doc">Returns a function that removes a grant map from a set of grants.
See update-bucket-acl.</pre></div><div class="public" id="var-update-bucket-acl"><h3>update-bucket-acl</h3><div class="usage"><code>(update-bucket-acl cred bucket &amp; funcs)</code></div><pre class="doc">Update the access control list (ACL) for the named bucket using functions
that update a set of grants (see get-bucket-acl).

This function is often used with the grant and revoke functions, e.g.

  (update-bucket-acl cred bucket
    (grant :all-users :read)
    (grant {:email &quot;foo@example.com&quot;} :full-control)
    (revoke {:email &quot;bar@example.com&quot;} :write))</pre></div><div class="public" id="var-update-object-acl"><h3>update-object-acl</h3><div class="usage"><code>(update-object-acl cred bucket key &amp; funcs)</code></div><pre class="doc">Updates the access control list (ACL) for the supplied object using functions
that update a set of grants (see update-bucket-acl for more details).</pre></div></div></body></html>